# FISIOFLOW - Prompts para Firebase Studio
## 100% Ecossistema Google - 1 App Flutter Ãšnico + Web

**Data:** 26 de Janeiro de 2026
**Escopo:** Web (computadores) + 1 App Flutter iOS (Paciente + Profissional)
**Meta:** 600 atendimentos/mÃªs, 15 funcionÃ¡rios, 30 pacientes teste

---

## ÃNDICE

1. [DecisÃ£o Inicial Firebase Studio](#1-decisÃ£o-inicial-firebase-studio)
2. [Prompt Inicial - Setup do Projeto](#2-prompt-inicial---setup-do-projeto)
3. [Prompt Fase 1 - Agenda (PRIORIDADE MÃXIMA)](#3-prompt-fase-1---agenda-prioridade-mÃ¡xima)
4. [Prompt Fase 2 - Pacientes + EvoluÃ§Ã£o SOAP](#4-prompt-fase-2---pacientes--evolucao-soap)
5. [Prompt Fase 3 - Flutter App (1 App, 2 Roles)](#5-prompt-fase-3---flutter-app-1-app-2-roles)
6. [Prompt Fase 4 - ExercÃ­cios + GamificaÃ§Ã£o](#6-prompt-fase-4---exercicios--gamificacao)
7. [Prompt Fase 5 - WhatsApp + Financeiro](#7-prompt-fase-5---whatsapp--financeiro)
8. [Prompt Fase 6 - NeuroPose + RelatÃ³rios](#8-prompt-fase-6---neuropose--relatorios)

---

## 1. DECISÃƒO INICIAL FIREBASE STUDIO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FIREBASE STUDIO - TELA INICIAL                                              â”‚
â”‚                                                                             â”‚
â”‚  ESCOLHA: [ New Workspace ]  âœ…                                              â”‚
â”‚                                                                             â”‚
â”‚  TECNOLOGIA: [ Next.js ]  âœ… (para Web + Backend API)                       â”‚
â”‚                                                                             â”‚
â”‚  DEPOIS: Criar projeto Flutter separado para Mobile                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. PROMPT INICIAL - SETUP DO PROJETO

Copie e cole este prompt no Firebase Studio AI:

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FISIOFLOW - SISTEMA DE GESTÃƒO PARA FISIOTERAPIA
Prompt Inicial - Setup do Projeto 100% Google Cloud Platform
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CONTEXTO DO PROJETO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Sou fisioterapeuta e estou criando um sistema completo para minha clÃ­nica de
fisioterapia.

MÃ‰TRICAS ATUAIS:
â€¢ 600 atendimentos/mÃªs
â€¢ 15 funcionÃ¡rios
â€¢ 30 pacientes ativos (fase teste)
â€¢ 4 pacientes por horÃ¡rio (capacidade padrÃ£o)

PRECISO CRIAR:
1. Web App (computadores) - Next.js + Firebase - Para profissionais (fisioterapeutas,
   administradores, recepcionistas)
2. 1 App Flutter iOS - Com role-based routing para:
   - Pacientes (acompanhar tratamento)
   - Profissionais (gestÃ£o em movimento)

ARQUITETURA GOOGLE:
â€¢ AutenticaÃ§Ã£o: Firebase Auth (Email, Google, Apple)
â€¢ Banco de Dados: Firestore (principal)
â€¢ Storage: Firebase Storage (fotos, vÃ­deos, documentos)
â€¢ Backend: Cloud Functions (2nd gen, Node.js 20)
â€¢ AI: Gemini API + Vertex AI
â€¢ Hosting: Firebase Hosting (Web)
â€¢ NotificaÃ§Ãµes: Firebase Cloud Messaging
â€¢ Analytics: Firebase Analytics

ROLES DO SISTEMA:
â€¢ admin - Acesso total
â€¢ fisioterapeuta - GestÃ£o de pacientes, evoluÃ§Ãµes, prescriÃ§Ãµes
â€¢ recepcionista - Agenda, cadastros
â€¢ estagiario - VisualizaÃ§Ã£o limitada
â€¢ educador_fisico - ExercÃ­cios e prescriÃ§Ãµes
â€¢ paciente - Acesso apenas aos prÃ³prios dados

REGRAS IMPORTANTES:
âœ… AGENDA Ã© PRIORIDADE MÃXIMA
âœ… Cadastro expresso: Apenas NOME Ã© obrigatÃ³rio para pacientes
âœ… HorÃ¡rio: 07:00-21:00 segunda a sexta, sÃ¡bado 07:00-13:00
âœ… Capacidade: 4 pacientes por horÃ¡rio (configurÃ¡vel)
âœ… NUNCA usar SMS (apenas WhatsApp)
âœ… NÃƒO querer telemedicina/teleconsulta
âœ… Design moderno e atraente
âœ… Performance: Carregamento < 3s

MODELO DE DADOS - FIRESTORE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Crie as seguintes coleÃ§Ãµes:

1. users
{
  id: string;
  email: string;
  full_name: string;
  role: 'admin' | 'fisioterapeuta' | 'recepcionista' | 'estagiario' | 'educador_fisico' | 'paciente';
  organization_id: string;
  phone: string;
  avatar_url: string;
  mfa_enabled: boolean;
  created_at: timestamp;
  updated_at: timestamp;
}

2. patients
{
  id: string;
  organization_id: string;
  full_name: string; // OBRIGATÃ“RIO (Ãºnico campo obrigatÃ³rio)
  cpf: string;
  birth_date: date;
  phone: string;
  email: string;
  address: object;
  insurance: string;
  insurance_number: string;
  medical_notes: string;
  allergies: string[];
  medications: string[];
  is_complete: boolean; // Flag de cadastro completo
  created_at: timestamp;
  updated_at: timestamp;
}

3. appointments
{
  id: string;
  organization_id: string;
  patient_id: string;
  patient_name: string; // Para cadastro expresso
  professional_id: string;
  date: timestamp;
  duration: number; // minutos
  type: 'individual' | 'group';
  room: string;
  status: 'pending' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'no_show';
  value: number;
  notes: string;
  created_at: timestamp;
  updated_at: timestamp;
}

4. evolutions (SOAP)
{
  id: string;
  organization_id: string;
  patient_id: string;
  professional_id: string;
  appointment_id: string;
  date: timestamp;
  soap: {
    subjective: string;
    objective: string;
    assessment: string;
    plan: string;
  };
  exercises: string[];
  measurements: object;
  pain_map: object;
  signature_url: string;
  is_signed: boolean; // ApÃ³s assinar, nÃ£o pode mais alterar
  created_at: timestamp;
  updated_at: timestamp;
}

5. exercises
{
  id: string;
  organization_id: string;
  name: string;
  description: string;
  video_url: string;
  images: string[];
  muscle_group: string;
  objective: string;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  sets: number;
  reps: number;
  duration: number;
  contraindications: string[];
  created_at: timestamp;
  updated_at: timestamp;
}

6. exercise_prescriptions
{
  id: string;
  organization_id: string;
  patient_id: string;
  professional_id: string;
  exercises: array; // [{ exercise_id, sets, reps, duration }]
  start_date: date;
  end_date: date;
  frequency: string; // "3x por semana"
  notes: string;
  is_active: boolean;
  created_at: timestamp;
}

7. gamification
{
  id: string;
  organization_id: string;
  patient_id: string;
  points: number;
  level: number;
  streak: number;
  achievements: array;
  completed_exercises: array;
  attended_sessions: array;
  created_at: timestamp;
  updated_at: timestamp;
}

8. transactions
{
  id: string;
  organization_id: string;
  type: 'income' | 'expense';
  amount: number;
  date: timestamp;
  category: string;
  patient_id: string;
  professional_id: string;
  professional_commission: number;
  payment_method: string;
  status: 'pending' | 'paid' | 'cancelled';
  notes: string;
  created_at: timestamp;
  updated_at: timestamp;
}

9. clinic_settings
{
  id: string;
  organization_id: string;
  name: string;
  working_hours: {
    weekday: { start: '07:00', end: '21:00' };
    saturday: { start: '07:00', end: '13:00' };
    sunday: null;
  };
  max_patients_per_slot: number; // PadrÃ£o: 4
  rooms: array;
  whatsapp_config: object;
  colors: object;
  logo_url: string;
  created_at: timestamp;
  updated_at: timestamp;
}

FIRESTORE SECURITY RULES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Crie regras de seguranÃ§a seguindo estes princÃ­pios:

1. Negar tudo por padrÃ£o (deny by default)
2. Pacientes sÃ³ acessam prÃ³prios dados
3. Profissionais acessam dados da sua organizaÃ§Ã£o
4. Admin tem acesso total
5. ValidaÃ§Ã£o de organization_id em todas as operaÃ§Ãµes

O QUE PRECISO QUE VOCÃŠ CRIE PRIMEIRO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Comece criando a estrutura base do projeto Next.js 15:

1. Estrutura de pastas:
   /app
     /(auth)/ - Login e recuperaÃ§Ã£o de senha
     /(dashboard)/ - Ãrea principal protegida
       /agenda - PÃ¡gina principal (PRIORIDADE MÃXIMA)
       /pacientes - GestÃ£o de pacientes
       /evolutions - EvoluÃ§Ãµes SOAP
       /exercicios - Biblioteca de exercÃ­cios
       /financeiro - GestÃ£o financeira
       /relatorios - Dashboards e analytics
       /configuracoes - AdministraÃ§Ã£o
     /api/v1 - Route Handlers para app Flutter
   /components
     /ui - shadcn/ui components
     /agenda - Componentes especÃ­ficos da agenda
     /patients - Componentes de pacientes
     /soap - Componentes de evoluÃ§Ã£o
   /lib
     /firebase - Firebase Admin SDK
     /firestore - Firestore helpers
     /auth - Authentication utilities
     /validators - Zod schemas
   /hooks - Custom React hooks
   /types - TypeScript types
   /actions - Server Actions

2. ConfiguraÃ§Ãµes iniciais:
   - next.config.js
   - tailwind.config.ts
   - tsconfig.json (strict mode)
   - .env.local template

3. Firebase Admin SDK setup para:
   - Auth (verifyIdToken)
   - Firestore (Admin SDK)
   - Storage (Admin SDK)

4. Sidebar layout para navegaÃ§Ã£o (todas as pÃ¡ginas)

Gere apenas a estrutura inicial. Eu validarei antes de continuarmos para as prÃ³ximas fases.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 3. PROMPT FASE 1 - AGENDA (PRIORIDADE MÃXIMA)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPT FASE 1 - MÃ“DULO DE AGENDA (PRIORIDADE MÃXIMA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Implemente o mÃ³dulo de AGENDA, que Ã© a funcionalidade mais importante do sistema:

REQUISITOS FUNCIONAIS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Grid de HorÃ¡rios:
   â€¢ HorÃ¡rio: 07:00 - 21:00 (segunda a sexta)
   â€¢ HorÃ¡rio: 07:00 - 13:00 (sÃ¡bado)
   â€¢ Fechado: domingo
   â€¢ VisualizaÃ§Ã£o: Dia, Semana, MÃªs
   - Colunas: HorÃ¡rios (linhas) x Profissionais ou Salas (colunas)

2. Cadastro Expresso de Agendamento:
   â€¢ Campos obrigatÃ³rios: APENAS nome do paciente
   â€¢ Se paciente nÃ£o existe, criar registro com is_complete: false
   â€¢ Avisar sobre cadastro incompleto

3. Tipos de Agendamento:
   â€¢ Individual (1 paciente)
   â€¢ Grupo (vÃ¡rios pacientes)

4. Status com CÃ³digo de Cores:
   â€¢ pending (cinza) - Pendente de confirmaÃ§Ã£o
   â€¢ confirmed (azul) - Confirmado
   â€¢ in_progress (amarelo) - Em andamento
   â€¢ completed (verde) - Realizado
   â€¢ cancelled (vermelho) - Cancelado
   â€¢ no_show (laranja) - Paciente faltou

5. Funcionalidades:
   âœ… Criar agendamento (duplo clique no slot vazio)
   âœ… Editar agendamento (duplo clique no existente)
   âœ… Drag and drop para remarcar
   âœ… Cancelar agendamento
   âœ… Filtro por profissional
   âœ… Filtro por sala/recurso
   âœ… Busca por nome do paciente
   âœ… DetecÃ§Ã£o de conflitos (nÃ£o permitir mesmo profissional em 2 lugares)
   âœ… Respeitar limite mÃ¡ximo por horÃ¡rio (configurÃ¡vel, padrÃ£o: 4)

6. AtualizaÃ§Ã£o AutomÃ¡tica de Status:
   â€¢ Se horÃ¡rio passou E status=pending â†’ mudar para no_show
   â€¢ Registrar quando started_at e completed_at

7. Campos do Agendamento:
   â€¢ date (timestamp) - Data e hora
   â€¢ patient_id (string) - ID do paciente
   â€¢ patient_name (string) - Nome (para cadastro expresso)
   â€¢ professional_id (string) - ID do fisioterapeuta
   â€¢ duration (number) - DuraÃ§Ã£o em minutos (padrÃ£o: 60)
   â€¢ type (string) - 'individual' | 'group'
   â€¢ room (string) - Sala/recurso
   â€¢ status (string) - 'pending' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'no_show'
   â€¢ value (number) - Valor (se particular)
   â€¢ notes (string) - ObservaÃ§Ãµes

REGRAS DE NEGÃ“CIO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Cadastro Expresso:
   - Permitir criar agendamento com apenas o nome do paciente
   - Criar registro em patients com is_complete: false
   - Mostrar aviso visual quando paciente tem is_complete: false

2. DetecÃ§Ã£o de Conflitos:
   - NÃ£o permitir agendar mesmo profissional em horÃ¡rio conflitante
   - NÃ£o ultrapassar limite mÃ¡ximo de pacientes por horÃ¡rio
   - Mostrar aviso visual quando houver conflito

3. Drag and Drop:
   - Permitir arrastar agendamento para novo horÃ¡rio
   - Verificar conflitos antes de mover
   - Atualizar date automaticamente

4. Status AutomÃ¡tico:
   - Agendamento em andamento: Quando profissional clicar "Iniciar"
   - Agendamento realizado: Quando profissional clicar "Finalizar"
   - No-show: Se horÃ¡rio passou e status ainda=pending (background job)

5. NotificaÃ§Ãµes (preparar para Fase 5):
   - Campo para configurar lembrete WhatsApp 24h antes
   - NÃ£o implementar ainda, apenas preparar estrutura

COMPONENTES NECESSÃRIOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. AppointmentGrid (componente principal)
   - Recebe: date, professionalIds, roomIds
   - Exibe: Grid com horÃ¡rios e agendamentos
   - Eventos: onAppointmentClick, onSlotClick, onDrop

2. AppointmentCard (card do agendamento)
   - Recebe: appointment
   - Exibe: Nome do paciente, horÃ¡rio, profissional, sala
   - Estilo: Cor baseada no status

3. AppointmentModal (modal de criaÃ§Ã£o/ediÃ§Ã£o)
   - FormulÃ¡rio com campos do agendamento
   - ValidaÃ§Ã£o de conflitos
   - BotÃ£o Salvar/Cancelar

4. AppointmentFilters (filtros)
   - Filtro por profissional
   - Filtro por sala
   - Busca por nome
   - View toggle (dia/semana/mÃªs)

5. QuickActions (aÃ§Ãµes rÃ¡pidas)
   - Confirmar
   - Iniciar
   - Finalizar
   - Cancelar
   - Remarcar

IMPLEMENTAÃ‡ÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Crie os seguintes arquivos:

1. /app/(dashboard)/agenda/page.tsx
   - PÃ¡gina principal da agenda
   - Grid de horÃ¡rios
   - Filtros e busca

2. /components/appointment/appointment-grid.tsx
   - Componente do grid
   - Usar: @schedule-x/react ou criar custom grid

3. /components/appointment/appointment-card.tsx
   - Card do agendamento
   - Drag and drop

4. /components/appointment/appointment-modal.tsx
   - Modal de criaÃ§Ã£o/ediÃ§Ã£o
   - FormulÃ¡rio com validaÃ§Ã£o

5. /lib/actions/appointments.ts
   - Server Actions para CRUD de agendamentos
   - createAppointment(data)
   - updateAppointment(id, data)
   - deleteAppointment(id)
   - getAppointments(filters)

6. /lib/validators/appointment.ts
   - ValidaÃ§Ãµes com Zod
   - ValidaÃ§Ã£o de conflitos

Gere o cÃ³digo completo da agenda.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 4. PROMPT FASE 2 - PACIENTES + EVOLUÃ‡ÃƒO SOAP

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPT FASE 2 - PACIENTES + EVOLUÃ‡ÃƒO SOAP (PRIORIDADE ALTA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Implemente o mÃ³dulo de PACIENTES e EVOLUÃ‡ÃƒO SOAP:

PARTE 1 - PACIENTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Lista de Pacientes:
   â€¢ Busca por nome
   â€¢ Filtros: Status, ConvÃªnio, Profissional
   â€¢ PaginaÃ§Ã£o
   â€¢ OrdenaÃ§Ã£o: Nome, Data cadastro, Ãšltima sessÃ£o
   â€¢ Indicador visual de cadastro incompleto

2. Cadastro Expresso:
   â€¢ Campo obrigatÃ³rio: APENAS nome completo
   â€¢ FormataÃ§Ã£o automÃ¡tica: "maria silva" â†’ "Maria Silva"
   - Criar paciente com is_complete: false

3. Cadastro Completo:
   â€¢ Nome completo (obrigatÃ³rio)
   â€¢ CPF (opcional)
   â€¢ Data de nascimento (opcional)
   â€¢ Sexo (opcional)
   â€¢ Telefone (opcional)
   â€¢ Email (opcional)
   â€¢ EndereÃ§o (opcional)
   â€¢ ConvÃªnio (opcional)
   â€¢ NÃºmero da carteirinha (opcional)
   â€¢ ObservaÃ§Ãµes mÃ©dicas (opcional)
   - Alergias (opcional)
   - Medicamentos em uso (opcional)

4. Perfil do Paciente:
   â€¢ InformaÃ§Ãµes pessoais
   â€¢ HistÃ³rico de atendimentos
   â€¢ EvoluÃ§Ãµes (SOAP)
   â€¢ PrescriÃ§Ãµes de exercÃ­cios
   â€¢ Documentos anexos
   - Mapa da dor histÃ³rico

PARTE 2 - EVOLUÃ‡ÃƒO SOAP (PRIORIDADE ALTA)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. MÃ©todo SOAP:
   â€¢ S - Subjetivo: Queixas do paciente
   â€¢ O - Objetivo: ObservaÃ§Ãµes do fisioterapeuta
   â€¢ A - AvaliaÃ§Ã£o: AvaliaÃ§Ã£o clÃ­nica
   â€¢ P - Plano: Plano de tratamento

2. Funcionalidades:
   âœ… Registro SOAP por sessÃ£o
   âœ… Templates prÃ©-definidos (por patologia)
   âœ… Registro rÃ¡pido (nÃ£o pode atrasar atendimentos)
   âœ… Anexo de fotos e vÃ­deos (Firebase Storage)
   âœ… Mapa da dor interativo
   âœ… Testes clÃ­nicos (ADM, ROM, forÃ§a)
   âœ… MediÃ§Ã£o de dor (EVA 0-10)
   âœ… Assinatura digital
   âœ… ExportaÃ§Ã£o em PDF
   âœ… ApÃ³s assinar: IMUTÃVEL (nÃ£o pode mais alterar)

3. Mapa da Dor:
   â€¢ SVG do corpo humano (frente/verso)
   â€¢ Clique para adicionar ponto de dor
   - Escala EVA 0-10
   â€¢ Tamanho do ponto proporcional Ã  intensidade
   â€¢ Cores: 0-3 verde, 4-6 amarelo, 7-10 vermelho
   â€¢ Comparativo com sessÃµes anteriores

4. Campos da EvoluÃ§Ã£o:
   â€¢ date (timestamp) - Data e hora da sessÃ£o
   â€¢ patient_id (string) - ID do paciente
   â€¢ professional_id (string) - ID do fisioterapeuta
   â€¢ appointment_id (string) - ID do agendamento
   â€¢ soap.subjective (string) - Queixas do paciente
   â€¢ soap.objective (string) - ObservaÃ§Ãµes
   â€¢ soap.assessment (string) - AvaliaÃ§Ã£o clÃ­nica
   â€¢ soap.plan (string) - Plano de tratamento
   â€¢ measurements (object) - MediÃ§Ãµes
   â€¢ pain_map (object) - Mapa da dor
   â€¢ exercises (array) - ExercÃ­cios realizados
   â€¢ signature_url (string) - URL da assinatura digital
   â€¢ is_signed (boolean) - Se assinado, nÃ£o pode alterar
   â€¢ created_at, updated_at

5. Templates de SOAP:
   â€¢ Criar templates prÃ©-definidos
   â€¢ Por patologia: "Lombalgia", "Cervicalgia", "Ombro", etc.
   â€¢ Campos prÃ©-preenchidos
   - EditÃ¡veis antes de salvar

COMPONENTES NECESSÃRIOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. PatientList (lista de pacientes)
   - Busca e filtros
   - PaginaÃ§Ã£o
   - Indicador de cadastro incompleto

2. PatientForm (formulÃ¡rio de paciente)
   - Cadastro expresso (apenas nome)
   - Cadastro completo
   - ValidaÃ§Ã£o com Zod

3. PatientDetail (perfil do paciente)
   - Abas: Info, HistÃ³rico, EvoluÃ§Ãµes, ExercÃ­cios, Documentos
   - Timeline de atendimentos

4. SOAPForm (formulÃ¡rio de evoluÃ§Ã£o)
   - Campos S, O, A, P
   - Mapa da dor interativo
   - MediÃ§Ãµes
   - Templates
   - Auto-save a cada 30s

5. PainMap (mapa da dor)
   - SVG corpo humano
   - Clique para adicionar ponto
   - Slider EVA 0-10

6. SignatureCanvas (assinatura digital)
   - Canvas para desenho
   - Salvar como URL (Firebase Storage)
   - ApÃ³s assinar: is_signed = true

IMPLEMENTAÃ‡ÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Crie os seguintes arquivos:

1. /app/(dashboard)/patients/page.tsx
   - Lista de pacientes
   - Busca e filtros

2. /app/(dashboard)/patients/[id]/page.tsx
   - Perfil do paciente
   - Abas com informaÃ§Ãµes

3. /app/(dashboard)/evolutions/new/page.tsx
   - Nova evoluÃ§Ã£o SOAP

4. /components/patients/patient-list.tsx
   - Lista com busca e filtros

5. /components/patients/patient-form.tsx
   - FormulÃ¡rio de paciente

6. /components/soap/soap-form.tsx
   - FormulÃ¡rio SOAP

7. /components/soap/pain-map.tsx
   - Mapa da dor interativo

8. /components/soap/signature-canvas.tsx
   - Assinatura digital

9. /lib/actions/patients.ts
   - Server Actions CRUD pacientes

10. /lib/actions/evolutions.ts
    - Server Actions CRUD evoluÃ§Ãµes

11. /lib/validators/patient.ts
    - ValidaÃ§Ãµes Zod

12. /lib/validators/evolution.ts
    - ValidaÃ§Ãµes Zod

Gere o cÃ³digo completo.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 5. PROMPT FASE 3 - FLUTTER APP (1 APP, 2 ROLES)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPT FASE 3 - FLUTTER APP (1 APP, ROLE-BASED ROUTING)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Crie o App Flutter iOS para FisioFlow com 1 app Ãºnico e role-based routing:

CONCEITO:
â€¢ 1 app Flutter instalado no iOS
â€¢ Login Ãºnico para todos os usuÃ¡rios
â€¢ ApÃ³s login, verificar role no token Firebase
â€¢ Redirecionar para interface especÃ­fica:
  - role='paciente' â†’ Tela de Paciente
  - role='fisioterapeuta'/'admin'/'recepcionista' â†’ Tela de Profissional

ARQUITETURA:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Setup projeto:
   flutter create fisioflow --org com.fisioflow
   cd fisioflow

2. DependÃªncias (pubspec.yaml):
   dependencies:
     flutter_riverpod: ^2.4.9
     go_router: ^13.0.0
     firebase_core: ^3.0.0
     firebase_auth: ^5.0.0
     cloud_firestore: ^5.0.0
     firebase_storage: ^12.0.0
     firebase_messaging: ^15.0.0
     google_sign_in: ^6.2.1
     sign_in_with_apple: ^6.1.0
     cached_network_image: ^3.3.1
     video_player: ^2.8.2
     fl_chart: ^0.67.0
     table_calendar: ^3.0.0

3. Estrutura de pastas:
   /lib
     /core
       /theme (cores, tipografia compartilhada com web)
       /constants
       /utils
     /features
       /auth
         /data
         /providers
         /screens
       /patient
         /home - Dashboard paciente
         /exercises - ExercÃ­cios prescritos
         /progress - Progresso e gamificaÃ§Ã£o
         /pain-checkin - Check-in de dor
       /professional
         /agenda - Agenda do profissional
         /patients - Lista de pacientes
         /soap - EvoluÃ§Ã£o SOAP rÃ¡pida
         /profile - Perfil do profissional
     /shared
       /widgets
       /services
       /models

4. Role-Based Routing:
   // lib/core/router/router.dart
   - ApÃ³s login, buscar custom claims do token
   - Redirecionar baseado em role:
     * patient â†’ /patient/home
     * fisioterapeuta, admin, recepcionista, estagiario â†’ /professional/agenda
   - Guard routes para validar acesso

PARTE 1 - AUTENTICAÃ‡ÃƒO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Tela de Login:
   â€¢ Email/senha
   â€¢ Google Sign-In
   â€¢ Apple Sign-In
   â€¢ "Esqueci minha senha"

2. Flow apÃ³s login:
   â€¢ Buscar custom claims do Firebase Auth token
   â€¢ Redirecionar para interface correta
   - Se role nÃ£o existir, mostrar erro

3. PermissÃµes:
   â€¢ role='patient' â†’ Apenas features de paciente
   â€¢ role='fisioterapeuta' â†’ Features profissionais + CRUD pacientes
   â€¢ role='admin' â†’ Tudo
   â€¢ role='recepcionista' â†’ Agenda + cadastros
   â€¢ role='estagiario' â†’ VisualizaÃ§Ã£o apenas

PARTE 2 - APP PACIENTE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. HomeScreen (Paciente):
   â€¢ Header: "OlÃ¡, [Nome]" + avatar
   â€¢ Card "PrÃ³xima Consulta":
     - Data, horÃ¡rio, profissional
     - BotÃ£o "Confirmar presenÃ§a"
   â€¢ Card "Plano de Hoje":
     - ExercÃ­cios do dia
     - CTA "ComeÃ§ar exercÃ­cios"
   â€¢ Card "Check-in de Dor":
     - Slider EVA 0-10
     - BotÃ£o "Registrar"

2. ExercisesScreen:
   â€¢ Lista de exercÃ­cios prescritos
   - VÃ­deo demonstrativo (video_player)
   - Contador de sÃ©ries/repetiÃ§Ãµes
   - Timer de descanso
   - RPE pÃ³s-exercÃ­cio (1-10)
   - BotÃ£o "NÃ£o consegui" + motivo

3. PainCheckinScreen:
   â€¢ Mapa de dor simplificado (2D)
   - Slider EVA 0-10
   - ComentÃ¡rio opcional
   - Salvar no Firestore

4. ProgressScreen:
   â€¢ GrÃ¡fico de adesÃ£o (Ãºltimos 30 dias)
   - EvoluÃ§Ã£o da dor (line chart)
   â€¢ HistÃ³rico de sessÃµes
   - Pontos ganhos
   - Conquistas desbloqueadas
   - NÃ­vel atual

PARTE 3 - APP PROFISSIONAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. AgendaScreen (Profissional):
   â€¢ Timeline do dia
   â€¢ Lista de agendamentos
   â€¢ Status badges (confirmado, pending, etc)
   â€¢ AÃ§Ãµes rÃ¡pidas: Confirmar, Iniciar, Finalizar, Cancelar
   â€¢ Filtros: sala, status
   â€¢ NavegaÃ§Ã£o para dia anterior/prÃ³ximo

2. PatientsScreen:
   â€¢ Lista de pacientes (busca por nome)
   - Card com foto, nome, Ãºltimo atendimento
   - Tap para ver detalhes

3. PatientDetailScreen:
   â€¢ Header: foto, nome, status
   â€¢ Abas:
     - VisÃ£o Geral: Info bÃ¡sicas
     - EvoluÃ§Ãµes: Lista de SOAP
     - ExercÃ­cios: PrescriÃ§Ãµes ativas
     - MÃ©tricas: GrÃ¡fico de dor

4. QuickSOAPScreen:
   â€¢ FormulÃ¡rio SOAP simplificado
   - Mapa de dor touch
   - Dictation (speech-to-text)
   - Templates frequentes
   - BotÃ£o "Salvar e voltar"

IMPLEMENTAÃ‡ÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Gere o cÃ³digo completo:

1. /lib/main.dart - Entry point
2. /lib/core/router/router.dart - Role-based routing
3. /lib/core/firebase/firebase_service.dart - Firebase setup
4. /lib/features/auth/screens/login_screen.dart - Login
5. /lib/features/patient/home/screens/home_screen.dart - Home paciente
6. /lib/features/patient/exercises/screens/exercises_screen.dart
7. /lib/features/professional/agenda/screens/agenda_screen.dart
8. /lib/features/professional/patients/screens/patients_screen.dart

Use go_router para navegaÃ§Ã£o e flutter_riverpod para state management.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 6. PROMPT FASE 4 - EXERCÃCIOS + GAMIFICAÃ‡ÃƒO

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPT FASE 4 - EXERCÃCIOS + GAMIFICAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Implemente o mÃ³dulo de EXERCÃCIOS e GAMIFICAÃ‡ÃƒO:

PARTE 1 - EXERCÃCIOS (WEB + FLUTTER)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Biblioteca de ExercÃ­cios:
   â€¢ Lista com busca e filtros
   â€¢ Filtros: Grupo muscular, Objetivo, NÃ­vel
   â€¢ VÃ­deo demonstrativo (obrigatÃ³rio)
   - Imagens
   â€¢ InstruÃ§Ãµes detalhadas
   â€¢ NÃ­veis: beginner, intermediate, advanced
   â€¢ ContraindicaÃ§Ãµes

2. PrescriÃ§Ã£o de ExercÃ­cios:
   â€¢ Selecionar exercÃ­cios da biblioteca
   â€¢ Configurar: sÃ©ries, reps, duraÃ§Ã£o
   â€¢ FrequÃªncia: "3x por semana"
   â€¢ Data inÃ­cio e fim
   â€¢ ObservaÃ§Ãµes
   - Enviar para paciente via app

3. VisualizaÃ§Ã£o do Paciente (App Flutter):
   â€¢ Lista de exercÃ­cios prescritos
   â€¢ VÃ­deo em loop
   â€¢ Contador de sÃ©ries/repetiÃ§Ãµes
   - Marcar como concluÃ­do
   â€¢ Feedback sobre o exercÃ­cio

PARTE 2 - GAMIFICAÃ‡ÃƒO (APP FLUTTER PACIENTE)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Sistema de Pontos:
   â€¢ +10 pontos por exercÃ­cio completado
   â€¢ +50 pontos por sessÃ£o realizada
   â€¢ +20 pontos por check-in de dor
   â€¢ +5 pontos por dia consecutivo (streak)

2. Conquistas (Achievements):
   â€¢ "Primeiro passo" - Completar 1 exercÃ­cio
   â€¢ "Dedicado" - 7 dias consecutivos
   â€¢ "Maratonista" - 30 dias consecutivos
   â€¢ "Atleta" - Completar 100 exercÃ­cios
   â€¢ "Recuperado" - Completar plano de tratamento

3. Desafios (Quests):
   â€¢ Desafio semanal: "Complete 20 exercÃ­cios esta semana"
   â€¢ Desafio mensal: "NÃ£o perder nenhuma sessÃ£o"
   â€¢ Recompensas: Pontos extras, badges

4. NÃ­veis de Progresso:
   â€¢ NÃ­vel 1: 0-100 pontos
   â€¢ NÃ­vel 2: 101-300 pontos
   â€¢ NÃ­vel 3: 301-600 pontos
   â€¢ ... (progressÃ£o exponencial)

5. Leaderboard (OPCIONAL):
   â€¢ Ranking semanal
   â€¢ Apenas primeiro nome + iniciais
   â€¢ Paciente pode desativar (privacidade)

CAMPOS DA GAMIFICAÃ‡ÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

gamification collection:
{
  id: string;
  organization_id: string;
  patient_id: string;
  points: number;
  level: number;
  streak: number;
  last_active_date: date;
  achievements: array; // [{ id, name, unlocked_at }]
  completed_exercises: array; // [{ exercise_id, completed_at }]
  attended_sessions: array; // [{ session_id, attended_at }]
  created_at: timestamp;
  updated_at: timestamp;
}

achievement definitions:
{
  id: string;
  name: string;
  description: string;
  icon: string;
  points_required: number;
  badge_image: string;
}

IMPLEMENTAÃ‡ÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

WEB (Next.js):
1. /app/(dashboard)/exercises/page.tsx
   - Biblioteca de exercÃ­cios

2. /app/(dashboard)/exercises/new/page.tsx
   - Criar novo exercÃ­cio

3. /app/(dashboard)/exercises/[id]/page.tsx
   - Detalhes do exercÃ­cio

4. /components/exercises/exercise-form.tsx
   - FormulÃ¡rio de exercÃ­cio

5. /components/exercises/prescription-modal.tsx
   - Modal de prescriÃ§Ã£o

FLUTTER:
1. /lib/features/patient/exercises/screens/exercises_list_screen.dart
   - Lista de exercÃ­cios prescritos

2. /lib/features/patient/exercises/screens/exercise_detail_screen.dart
   - Detalhes + execuÃ§Ã£o

3. /lib/features/patient/gamification/screens/achievements_screen.dart
   - Conquistas desbloqueadas

4. /lib/features/patient/gamification/screens/leaderboard_screen.dart
   - Ranking (opcional)

CLOUD FUNCTIONS:
1. /functions/src/gamification/onExerciseComplete.ts
   - Adicionar pontos ao completar exercÃ­cio
   - Verificar conquistas desbloqueadas
   - Atualizar nÃ­vel

Gere o cÃ³digo completo.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 7. PROMPT FASE 5 - WHATSAPP + FINANCEIRO

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPT FASE 5 - WHATSAPP + FINANCEIRO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Implemente o mÃ³dulo de WHATSAPP e FINANCEIRO:

PARTE 1 - WHATSAPP (Cloud API)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

REGRAS IMPORTANTES:
âœ… Usar APENAS WhatsApp (NUNCA SMS)
âœ… Opt-in do paciente para receber mensagens
âœ… Templates prÃ©-aprovados Meta

1. Lembretes AutomÃ¡ticos:
   â€¢ 24h antes da consulta
   â€¢ Template: "OlÃ¡ {nome}, confirmando consulta dia {data} Ã s {hora}?"
   - BotÃµes: [Sim] [NÃ£o] [Reagendar]

2. ConfirmaÃ§Ã£o de Consulta:
   â€¢ Paciente responde "Sim"
   â€¢ Atualizar status para confirmed
   â€¢ Se "NÃ£o": oferecer reagendar

3. Lista de Espera:
   â€¢ Quando consulta cancelada
   â€¢ Oferecer vaga para prÃ³xima pessoa na lista
   â€¢ Timeout de 2h para resposta

4. Mensagens:
   - Lembrete de exercÃ­cios
   - Feedback de sessÃ£o
   - Promocional (se opt-in)

PARTE 2 - FINANCEIRO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Contas a Receber:
   â€¢ Lista de valores a receber
   â€¢ Por paciente
   â€¢ Filtros: Status, Data, Profissional
   - Marcar como pago

2. Contas a Pagar:
   â€¢ Despesas operacionais
   â€¢ SalÃ¡rios, comissÃµes
   - Filtros: Categoria, Data, Status

3. Fluxo de Caixa:
   â€¢ Dashboard com entradas/saÃ­das
   â€¢ Saldo atual
   - PrevisÃ£o mÃªs

4. ComissÃµes:
   â€¢ Calcula comissÃ£o do profissional
   â€¢ % do valor da consulta
   - RelatÃ³rio de comissÃµes

5. RelatÃ³rios Financeiros:
   â€¢ Faturamento mensal
   â€¢ Por profissional
   - Por convÃªnio x particular
   - Exportar PDF/Excel

CAMPOS DAS TRANSAÃ‡Ã•ES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

transactions collection:
{
  id: string;
  organization_id: string;
  type: 'income' | 'expense';
  amount: number;
  date: timestamp;
  category: string;
  patient_id: string; // se income
  professional_id: string; // se comissÃ£o
  professional_commission: number; // valor da comissÃ£o
  payment_method: string;
  status: 'pending' | 'paid' | 'cancelled';
  notes: string;
  created_at: timestamp;
  updated_at: timestamp;
}

IMPLEMENTAÃ‡ÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

WEB:
1. /app/(dashboard)/whatsapp/page.tsx
   - ConfiguraÃ§Ãµes WhatsApp
   - Templates
   - Logs de envio

2. /app/(dashboard)/financeiro/page.tsx
   - Dashboard financeiro

3. /app/(dashboard)/financeiro/contas-a-receber/page.tsx
   - Contas a receber

4. /app/(dashboard)/financeiro/contas-a-pagar/page.tsx
   - Contas a pagar

5. /app/(dashboard)/financeiro/relatorios/page.tsx
   - RelatÃ³rios financeiros

CLOUD FUNCTIONS:
1. /functions/src/whatsapp/sendReminder.ts
   - Cloud Scheduler: 24h antes da consulta
   - Enviar template WhatsApp

2. /functions/src/whatsapp/webhook.ts
   - Receber respostas do WhatsApp
   - Atualizar status

3. /functions/src/financeiro/calculateCommission.ts
   - Calcular comissÃ£o profissional

Gere o cÃ³digo completo.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## 8. PROMPT FASE 6 - NEUROPOSE + RELATÃ“RIOS

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPT FASE 6 - NEUROPOSE (ANÃLISE DE IMAGENS) + RELATÃ“RIOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Implemente o mÃ³dulo de NEUROPOSE e RELATÃ“RIOS:

PARTE 1 - NEUROPOSE (ANÃLISE DE IMAGENS COM IA)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Upload de Fotos/VÃ­deos:
   â€¢ Paciente faz upload via app
   â€¢ Armazenar no Firebase Storage

2. AnÃ¡lise com IA (MediaPipe/TensorFlow):
   â€¢ DetecÃ§Ã£o de landmarks (pontos anatÃ´micos)
   â€¢ AnÃ¡lise de postura
   - ComparaÃ§Ã£o antes/depois
   â€¢ RelatÃ³rios automÃ¡ticos

3. VisualizaÃ§Ã£o:
   â€¢ Overlay de landmarks na imagem
   â€¢ Linhas de referÃªncia
   â€¢ MediÃ§Ãµes automÃ¡ticas
   - ComparaÃ§Ã£o lado a lado

4. ExportaÃ§Ã£o:
   â€¢ VÃ­deo comparativo
   - RelatÃ³rio PDF
   - Imagens para redes sociais

REGRAS:
â€¢ Privacidade: Imagens armazenadas com seguranÃ§a
â€¢ Consentimento: Paciente autoriza uso
â€¢ IA: MediaPipe Pose para detecÃ§Ã£o

PARTE 2 - RELATÃ“RIOS E ANALYTICS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Dashboard Principal:
   â€¢ MÃ©tricas em tempo real
   - Atendimentos hoje/semana/mÃªs
   - Faturamento do mÃªs
   â€¢ OcupaÃ§Ã£o (%)
   â€¢ No-show rate
   â€¢ Pacientes ativos

2. RelatÃ³rios:
   â€¢ Atendimentos (por perÃ­odo, profissional)
   â€¢ Pacientes ativos/inativos
   â€¢ Faturamento (mensal, por convÃªnio)
   â€¢ OcupaÃ§Ã£o de profissionais
   â€¢ Aniversariantes do mÃªs
   - Performance da equipe

3. Analytics com IA (Gemini):
   â€¢ Insights automÃ¡ticos
   â€¢ PrevisÃ£o de demanda
   â€¢ Gaps de horÃ¡rios
   â€¢ RecomendaÃ§Ãµes

4. Heatmap de OcupaÃ§Ã£o:
   â€¢ VisualizaÃ§Ã£o da semana
   â€¢ HorÃ¡rios mais ocupados
   - HorÃ¡rios vazios (oportunidade)

IMPLEMENTAÃ‡ÃƒO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

WEB:
1. /app/(dashboard)/relatorios/page.tsx
   - Dashboard principal

2. /app/(dashboard)/relatorios/atendimentos/page.tsx
   - RelatÃ³rio de atendimentos

3. /app/(dashboard)/relatorios/faturamento/page.tsx
   - RelatÃ³rio financeiro

4. /app/(dashboard)/neuropose/upload/page.tsx
   - Upload de imagens

5. /app/(dashboard)/neuropose/analyze/page.tsx
   - AnÃ¡lise com IA

FLUTTER:
1. /lib/features/patient/neuropose/screens/upload_screen.dart
   - Upload de foto/vÃ­deo

2. /lib/features/patient/neuropose/screens/result_screen.dart
   - Resultado da anÃ¡lise

CLOUD FUNCTIONS:
1. /functions/src/neuropose/analyzeImage.ts
   - Cloud Function para analisar imagem
   - Usar MediaPipe/TensorFlow

2. /functions/src/analytics/generateInsights.ts
   - Gemini API para insights

Gere o cÃ³digo completo.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## CHECKLIST FINAL

### Fase 0 - Setup
- [ ] Next.js 15 + TypeScript + Tailwind
- [ ] Firebase Hosting configurado
- [ ] Firebase Auth (Email, Google, Apple)
- [ ] Firestore criado
- [ ] Security Rules configuradas
- [ ] Sidebar layout

### Fase 1 - Agenda (PRIORIDADE MÃXIMA)
- [ ] Grid de horÃ¡rios 07:00-21:00
- [ ] Cadastro expresso (apenas nome)
- [ ] Drag and drop
- [ ] DetecÃ§Ã£o de conflitos
- [ ] Status com cÃ³digo de cores
- [ ] Filtros profissional/sala

### Fase 2 - Pacientes + SOAP
- [ ] Lista pacientes busca/filtros
- [ ] Cadastro expresso/completo
- [ ] FormulÃ¡rio SOAP
- [ ] Mapa da dor interativo
- [ ] Assinatura digital
- [ ] Templates SOAP

### Fase 3 - Flutter App
- [ ] Setup Flutter + Firebase
- [ ] Login Email/Google/Apple
- [ ] Role-based routing
- [ ] App Paciente (home, exercÃ­cios, progresso)
- [ ] App Profissional (agenda, pacientes, SOAP)

### Fase 4 - ExercÃ­cios + GamificaÃ§Ã£o
- [ ] Biblioteca exercÃ­cios
- [ ] PrescriÃ§Ã£o de exercÃ­cios
- [ ] Sistema de pontos
- [ ] Conquistas/Achievements
- [ ] Desafios/Quests
- [ ] Leaderboard opcional

### Fase 5 - WhatsApp + Financeiro
- [ ] WhatsApp Cloud API
- [ ] Lembretes automÃ¡ticos
- [ ] Contas a receber/pagar
- [ ] Fluxo de caixa
- [ ] ComissÃµes

### Fase 6 - NeuroPose + RelatÃ³rios
- [ ] Upload imagens
- [ ] AnÃ¡lise MediaPipe
- [ ] Dashboard relatÃ³rios
- [ ] Analytics Gemini
- [ ] Heatmap ocupaÃ§Ã£o

---

## PRÃ“XIMOS PASSOS

1. Copie o **PROMPT INICIAL** (SeÃ§Ã£o 2)
2. Cole no Firebase Studio AI
3. Valide a estrutura gerada
4. Continue com **FASE 1 - AGENDA** (PRIORIDADE MÃXIMA)
5. Siga sequencialmente as fases

Boa sorte! ğŸš€

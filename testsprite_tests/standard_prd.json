{
  "meta": {
    "project": "FisioFlow",
    "date": "2026-01-31",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "FisioFlow is a comprehensive and intuitive management system for physiotherapy clinics in Brazil, designed to reduce no-shows, increase operational efficiency, and enhance the experience of patients and professionals through automation, structured clinical records, and integrated communication.",
  "core_goals": [
    "Reduce losses from no-shows by lowering the no-show rate below 15% and increasing confirmation rates above 85%.",
    "Improve operational efficiency by enabling scheduling in under 2 minutes and reducing SOAP clinical note time to less than 10 minutes.",
    "Enhance financial management visibility and control, aiming for less than 3% delinquency and clear management of session packages and expirations.",
    "Ensure high system reliability, responsiveness, and compliance with data security and accessibility standards (LGPD, WCAG 2.1 AA).",
    "Provide a seamless, role-based access control system with efficient workflows for all user profiles in the clinic environment."
  ],
  "key_features": [
    "Patient Management: Complete patient registration with CPF validation, medical history, document uploads, interactive pain maps, LGPD compliance, and ability to deactivate records without data loss.",
    "Agenda and Scheduling: Visual calendar (day/week/month), appointment creation/editing with drag-and-drop rescheduling, conflict and capacity validation, multi-professional and multi-room support, configurable session durations and work schedules.",
    "Electronic Medical Records (SOAP): Structured clinical notes with subjective, objective, assessment, plan; interactive pain map with EVA scale; attachments handling; session comparisons; auto-save; digital signatures; audit trail; PDF generation.",
    "Exercise Library and Protocols: Catalog of filtered exercises, personalized prescription with sets, reps, time; evidence-based protocols; integration with medical records; progress tracking; exportable reports.",
    "Evaluation Forms: Validated templates, customizable form editor, import/export capabilities, linkage to patients and clinical sessions.",
    "Basic Financial Management: Control of income/expenses, insurance plans, accounts, cash flow, receipts, and reports with plans to add session packages and automated payments.",
    "Communication and Automation (Planned): Integration with WhatsApp Business API and Resend/SendGrid for reminders, confirmations, and waitlists; in-app communication center.",
    "System Administration: User and role management, invitation and approval flows, audit logging, security monitoring, and organizational settings.",
    "AI Features (Partial): Clinical suggestion chatbot, AI insights and recommendations for patients.",
    "Responsive and Accessible UI: Mobile-first design using React, Tailwind CSS, and accessibility standards compliance."
  ],
  "user_flow_summary": [
    "Admins log in and manage clinic settings, users, roles, and view comprehensive analytics dashboards.",
    "Receptionists access the agenda to schedule, reschedule, and confirm appointments with visual calendar tools and conflict detection.",
    "Physiotherapists record SOAP notes with attachments and pain maps, prescribe exercises and protocols, and track patient progress through integrated interfaces.",
    "Patients access their own data, view prescribed exercises, and review their clinical histories through a user-friendly portal.",
    "The AI chatbot provides clinical suggestions and answers patient and professional queries interactively within the app.",
    "Automated reminders and confirmations via planned communication integrations reduce no-shows and improve engagement.",
    "System administrators monitor security events, audit logs, and manage organizational configurations ensuring compliance and data safety."
  ],
  "validation_criteria": [
    "Users authenticate via secure role-based access control and can only access authorized modules.",
    "Patient records support full lifecycle: creation, validation (including CPF), editing, deactivation without history loss.",
    "Appointment scheduling supports creation, editing, drag-and-drop rescheduling with capacity and conflict validations.",
    "SOAP clinical notes and pain maps are saved accurately, support attachments, comparisons, auto-save, and approved signatures.",
    "Exercise prescription allows selection, filtering, protocol application, and progress tracking per patient.",
    "Dashboards reflect up-to-date and accurate metrics for occupancy, clinical evolution, and financial status.",
    "User interface performs with page loads under 2 seconds, APIs respond within 500ms P95, and achieve Lighthouse performance ≥90.",
    "System passes security requirements with JWT authentication, RLS, encrypted sensitive data, and audit logs for critical actions.",
    "All features are responsive and accessible, meeting at least WCAG 2.1 AA standards for usability.",
    "Codebase maintains strict TypeScript typing, with testing coverage over 70% including unit and end-to-end tests."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React",
      "Vite",
      "Tailwind CSS",
      "shadcn/ui",
      "Firebase",
      "Supabase",
      "PostgreSQL",
      "Drizzle ORM",
      "Playwright",
      "Vitest",
      "Capacitor",
      "Inngest"
    ],
    "features": [
      {
        "name": "Frontend UI",
        "description": "Aplicação web SPA com React, Vite, páginas de dashboard, agenda, pacientes, exercícios e configurações.",
        "files": [
          "src/",
          "src/pages/",
          "src/components/",
          "index.html",
          "vite.config.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "FisioFlow Frontend",
            "version": "1.0"
          },
          "paths": {}
        }
      },
      {
        "name": "AI Chat",
        "description": "Chat com IA para sugestões clínicas e respostas assistidas.",
        "files": [
          "api/ai/chat/route.ts",
          "api/ai/chat/v2/route.ts",
          "src/components/chatbot/"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/ai/chat": {
              "post": {
                "summary": "Chat AI endpoint",
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "AI Insights",
        "description": "Recomendações e insights baseados em IA para pacientes.",
        "files": [
          "api/ai/insights/route.ts",
          "api/ai/recommendations/route.ts",
          "api/ai/suggest-exercise/route.ts",
          "api/ai/transcribe/route.ts"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/ai/insights": {
              "post": {
                "summary": "AI insights"
              }
            },
            "/api/ai/recommendations": {
              "post": {
                "summary": "AI recommendations"
              }
            }
          }
        }
      },
      {
        "name": "Agenda e Agendamentos",
        "description": "Calendário visual, criação e reagendamento de consultas via drag-and-drop, validação de conflitos.",
        "files": [
          "src/pages/Schedule.tsx",
          "src/components/schedule/",
          "src/hooks/useCalendarDrag.ts",
          "src/services/appointmentService.ts"
        ],
        "api_doc": {}
      },
      {
        "name": "Pacientes",
        "description": "Cadastro, busca e gestão de pacientes com validação de CPF e histórico clínico.",
        "files": [
          "src/pages/Patients.tsx",
          "src/pages/patients/",
          "src/hooks/usePatients.ts",
          "src/schemas/patient.ts"
        ],
        "api_doc": {}
      },
      {
        "name": "Exercícios e Protocolos",
        "description": "Biblioteca de exercícios, prescrição personalizada e protocolos de tratamento.",
        "files": [
          "src/pages/Exercises.tsx",
          "src/pages/Protocols.tsx",
          "src/components/exercises/",
          "src/data/protocols.ts"
        ],
        "api_doc": {}
      },
      {
        "name": "Prontuário e Evolução SOAP",
        "description": "Registro de evolução clínica, SOAP, mapa de dor e documentos.",
        "files": [
          "src/pages/MedicalRecord.tsx",
          "src/contexts/SoapContext.tsx",
          "src/lib/services/painMapService.ts"
        ],
        "api_doc": {}
      },
      {
        "name": "Autenticação",
        "description": "Login, autorização e gestão de sessões via Firebase/Clerk.",
        "files": [
          "src/contexts/AuthContext.tsx",
          "src/integrations/firebase/auth.ts",
          "src/components/ProtectedRoute.tsx"
        ],
        "api_doc": {}
      }
    ]
  }
}
